<!doctype HTML>
<html>
    <head>
        <title>Stock Trumps by Daphack</title>

        <link rel="stylesheet" type="text/css" href="./css/styles.css" />
        <script type="text/javascript" src="./js/jquery-1.11.2.min.js"></script>
        <script type="text/javascript" src="./js/events.js"></script>
        <script type="text/javascript" src="./js/client.js"></script>
        <script type="text/javascript" src="./js/game.js"></script>
    </head>
    <body>
        <section class="page home">
                <h1 class="page-heading home-heading">Stock Trumps</h1>
                <button class="button home-button-play" onclick="$('.share').show(); $('.home').hide();"><span>Play</span></button>
        </section>

        <section class="page share">
            <span class="share-message">Waiting for players...</span>
            <img src="./images/loading.gif" width="54px" height="55px" />
            <span><span class="share-count">1</span> out of 8 players found</span>
            <h2 class="page-heading share-heading">Share This Url...</h2>
            <input class="share-url" type="text" id="share-url" readonly value="http://stocktrumps.assemblyco.de/" />
            <button class="button share-button-go" disabled><span>Go!</span></button>
        </section>

        <section class="page play">
            <h2 class="page-heading play-heading metric-phrase">Select Highest Market <span class="metric">Capitalisation</span></h2>
            <p class="timer">Total time remaining: <span class="time"></span> seconds</p>
            <p class="timer round"></p>
            <div class="cards">
                <div class="cards-card" data-tick="">
                    <div class="cards-card-title">
                        <span class="name">AAPL</span>
                    </div>
                    <img class="cards-card-image" src="http://www.bloomberg.com/image/ifiqYe8QHJwo.jpg" />
                    <div class="cards-card-data">
                        <div class="cards-card-data-group">
                            <span class="label">Cap:</span>
                            <span class="data" id="cap">10000000000</span>
                        </div>

                        <div class="cards-card-data-group">
                            <span class="label">Price:</span>
                            <span class="data" id="price">$400</span>
                        </div>

                        <div class="cards-card-data-group">
                            <span class="label">Change:</span>
                            <span class="data" id="change">-400</span>
                        </div>
                    </div>
                </div>
                <div class="cards-card" data-tick="AAPL">
                    <div class="cards-card-title">
                        <span class="name">Apple Corp.</span>
                    </div>
                    <img class="cards-card-image" src="http://www.bloomberg.com/image/ifiqYe8QHJwo.jpg" />
                    <div class="cards-card-data">
                        <div class="cards-card-data-group">
                            <span class="label">Cap:</span>
                            <span class="data" id="cap">10000000000</span>
                        </div>

                        <div class="cards-card-data-group">
                            <span class="label">Price:</span>
                            <span class="data" id="price">$400</span>
                        </div>

                        <div class="cards-card-data-group">
                            <span class="label">Change:</span>
                            <span class="data" id="change">-400</span>
                        </div>
                    </div>
                </div>
                <div class="cards-card" data-tick="AAPL">
                    <div class="cards-card-title">
                        <span class="name">Apple Corp</span>
                    </div>
                    <img class="cards-card-image" src="http://www.bloomberg.com/image/ifiqYe8QHJwo.jpg" />
                    <div class="cards-card-data">
                        <div class="cards-card-data-group">
                            <span class="label">Cap:</span>
                            <span class="data" id="cap">10000000000</span>
                        </div>

                        <div class="cards-card-data-group">
                            <span class="label">Price:</span>
                            <span class="data" id="price">$400</span>
                        </div>

                        <div class="cards-card-data-group">
                            <span class="label">Change:</span>
                            <span class="data" id="change">-400</span>
                        </div>
                    </div>
                </div>
                <div class="cards-card" data-tick="AAPL">
                    <div class="cards-card-title">
                        <span class="name">Apple Corp.</span>
                    </div>
                    <img class="cards-card-image" src="http://www.bloomberg.com/image/ifiqYe8QHJwo.jpg" />
                    <div class="cards-card-data">
                        <div class="cards-card-data-group">
                            <span class="label">Cap:</span>
                            <span class="data" id="cap">10000000000</span>
                        </div>

                        <div class="cards-card-data-group">
                            <span class="label">Price:</span>
                            <span class="data" id="price">$400</span>
                        </div>

                        <div class="cards-card-data-group">
                            <span class="label">Change:</span>
                            <span class="data" id="change">-400</span>
                        </div>
                    </div>
                </div>
                <div class="cards-card" data-tick="AAPL">
                    <div class="cards-card-title">
                        <span class="name">Apple Corp.</span>
                    </div>
                    <img class="cards-card-image" src="http://www.bloomberg.com/image/ifiqYe8QHJwo.jpg" />
                    <div class="cards-card-data">
                        <div class="cards-card-data-group">
                            <span class="label">Cap:</span>
                            <span class="data" id="cap">10000000000</span>
                        </div>

                        <div class="cards-card-data-group">
                            <span class="label">Price:</span>
                            <span class="data" id="price">$400</span>
                        </div>

                        <div class="cards-card-data-group">
                            <span class="label">Change:</span>
                            <span class="data" id="change">-400</span>
                        </div>
                    </div>
                </div>
            </div>
            <button class="button play-button-choose"><span>Choose Card!</span></button>
        </section>


        <section class="page loading">
            <h2 class="page-heading loading-heading">Waiting For Everyone</h2>
            <img src="./images/loading.gif" height="55px" width="54px"/>
        </section>

        <section class="page result">
            <h2 class="page-heading result-heading"></h2>
            <btn class="restart-game">New Game </btn>
        </section>
        <script type="text/javascript">
        var game;
        var isHost = true;
        var gameQuery;
        var loadedImages = 0;
        var round = 1;

            $(document).ready(function() {
                $('.page').hide();
                $('.page.home').show();
                //check for GET Params and multiple games
                gameQuery = window.location.search.replace("?g=", "");
                console.log(gameQuery);
                if (gameQuery){
                    isHost = false;
                    createWebsocket();
                    $('.page.home').hide();
                    $('.share').show();
                    $('.share-button-go').hide();
                }

            });

            $('.cards-card').click(clickCard);

            $('.play-button-choose').click(function() {
                $('.cards-card').each(function() {
                    if(!$(this).hasClass('selected')) {
                        $(this).css('opacity', 0.2);
                        $(this).unbind('click');
                    }
                });

                chooseCard();
            });

            $('.home-button-play').click(createWebsocket);

            //$('.share-button-go').click(getMetric);
            $('.restart-game').click(function() {
                $('.page').hide();
                $('.share').show();

                clearInterval(timer);
                $('.page .time').text("30");

                $('.cards-card').each(function() {
                    $(this).removeClass('selected');
                    $(this).css('opacity','1');
                    $(this).click(clickCard);
                });

                $('.play-button-choose').hide();

                socket.clearAnswers();
                round += 1;
                $('.round').text("Round: " + round.toString());
            });

            $('.round').text("Round: " + round.toString());
        </script>
    </body>
</html>
